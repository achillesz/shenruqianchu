"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports.default = function (files) {
    if (!(files instanceof Array)) {
        files = [files];
    }

    return (0, _asyncList2.default)(files.map(function (file) {
        return function (callback) {
            copyFile(file.src, file.dist, callback);
        };
    }));
};

var _fs = require("fs");

var _fs2 = _interopRequireDefault(_fs);

var _path = require("path");

var _path2 = _interopRequireDefault(_path);

var _mkdirs = require("./mkdirs");

var _mkdirs2 = _interopRequireDefault(_mkdirs);

var _asyncList = require("./async-list");

var _asyncList2 = _interopRequireDefault(_asyncList);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function copyFile(src, dist, callback) {
    _mkdirs2.default.sync(_path2.default.dirname(dist));
    var fileReadStream = _fs2.default.createReadStream(src);
    var fileWriteStream = _fs2.default.createWriteStream(dist);
    fileReadStream.pipe(fileWriteStream);
    fileWriteStream.on("close", callback);
}